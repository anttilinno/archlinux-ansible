---
# Hardware configuration
arch_install_disk: /dev/sda
arch_install_root_fs_label: archroot
arch_install_cpu: intel      # intel, amd, or none
arch_install_gpu: intel      # intel, amd, nvidia, or none
arch_install_boot_mode: bios # bios or uefi
arch_install_wifi: true      # install wifi packages (networkmanager, wpa_supplicant)

# System configuration
arch_install_hostname: archbox
arch_install_locale: en_US.UTF-8
arch_install_timezone: Europe/Tallinn
arch_install_keymap: us

# User configuration
arch_install_admin_user: antti
arch_install_admin_shell: /bin/zsh
arch_install_admin_pubkey: "{{ lookup('file', '~/.ssh/id_ed25519.pub', errors='ignore') | default(lookup('file','~/.ssh/id_rsa.pub')) }}"
arch_install_repo_url: https://github.com/anttilinno/archlinux-ansible.git
arch_install_root_password_hash: '!*'  # Locked by default

# Safety toggles
arch_install_force_repartition: false
arch_install_state_marker: /mnt/root/.ansible-stage0-done

# Partition layout
arch_install_efi_size: 512MiB  # UEFI only
arch_install_swap_size: 4GiB

# Package set (core - always installed)
arch_install_base_packages:
  - base
  - linux-lts
  - linux-firmware
  - iptables
  - mkinitcpio
  - openssh
  - sudo
  - python
  - neovim
  - zsh
  - ansible
  - git
  - mise

# Wifi packages
arch_install_wifi_packages:
  - networkmanager
  - wpa_supplicant

# CPU-specific packages
arch_install_cpu_packages:
  intel:
    - intel-ucode
  amd:
    - amd-ucode
  none: []

# GPU-specific packages
arch_install_gpu_packages:
  intel:
    - mesa
    - xf86-video-intel
  amd:
    - mesa
    - xf86-video-amdgpu
  nvidia:
    - mesa
    - nvidia-lts
    - nvidia-utils
  none:
    - mesa

# Boot mode packages
arch_install_boot_packages:
  bios:
    - syslinux
  uefi:
    - limine
    - efibootmgr

# Mirror refresh behavior
arch_install_mirror_refresh_interval_secs: 86400  # 1 day
arch_install_reflector_timeout_secs: 20
arch_install_skip_mirror_refresh: false
arch_install_reflector_countries:
  - Estonia
  - Finland
  - Sweden
  - Latvia
  - Lithuania

# Mount options
arch_install_root_mount_opts: noatime

# Reboot behavior
arch_install_perform_reboot: true
arch_install_reboot_timeout: 180

